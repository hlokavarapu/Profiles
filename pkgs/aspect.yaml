extends: [cmake_package]
dependencies: 
  build: [dealii]

sources:
- url: http://geodynamics.org/cig/software/aspect/aspect-1.0.tar.gz
  key: tar.gz:t32l7zwfaaiqcz7r5h7upqnzhhk2vq7k

build_stages:
- name: configure
  mode: override
  extra: ['-D DEAL_II_DIR=${DEALII_DIR}',
          '-D CMAKE_INSTALL_PREFIX:PATH=${ARTIFACT}',
          '-D CMAKE_BUILD_TYPE=Release']

- name: install
  mode: remove

when_build_dependency:
- set: ASPECT_HOME
  value: ${ARTIFACT}
